/* Locomotive Scroll styles with dual browser support */
html.has-scroll-smooth {
    overflow: hidden;
    -webkit-overflow-scrolling: touch;
}

html.has-scroll-dragging {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

.has-scroll-smooth body {
    overflow: hidden;
}

.has-scroll-smooth [data-scroll-container] {
    min-height: 100vh;
    perspective: 1000px;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
    will-change: transform;
}

[data-scroll-section] {
    position: relative;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    will-change: transform;
}

/* Enhanced scroll animations */
[data-scroll] {
    transition: transform 1.2s cubic-bezier(0.23, 1, 0.32, 1), opacity 1s ease;
    will-change: transform, opacity;
    transform-origin: center center;
}

/* Speed variations with scale for Chrome */
[data-scroll-speed="1"] {
    transform: translateY(var(--scroll-offset, 0)) scale(0.98);
    -webkit-transform: translateY(var(--scroll-offset, 0)) scale(0.98);
    opacity: calc(1 - abs(var(--scroll-offset, 0)) / 1000);
}

[data-scroll-speed="2"] {
    transform: translateY(calc(var(--scroll-offset, 0) * 1.5)) scale(0.96);
    -webkit-transform: translateY(calc(var(--scroll-offset, 0) * 1.5)) scale(0.96);
    opacity: calc(1 - abs(var(--scroll-offset, 0)) / 800);
}

[data-scroll-speed="3"] {
    transform: translateY(calc(var(--scroll-offset, 0) * 2)) scale(0.94);
    -webkit-transform: translateY(calc(var(--scroll-offset, 0) * 2)) scale(0.94);
    opacity: calc(1 - abs(var(--scroll-offset, 0)) / 600);
}

/* Parallax effect using translateZ */
[data-scroll-parallax] {
    transition: transform 1s cubic-bezier(0.23, 1, 0.32, 1);
    will-change: transform;
    transform: translateZ(calc(var(--scroll-offset, 0) * -0.2px));
    -webkit-transform: translateZ(calc(var(--scroll-offset, 0) * -0.2px));
}

/* Fade effect */
[data-scroll-fade] {
    opacity: 0;
    transition: opacity 1.2s ease-out, transform 1.2s cubic-bezier(0.23, 1, 0.32, 1);
    transform: translateY(30px);
    -webkit-transform: translateY(30px);
}

[data-scroll-fade].is-inview {
    opacity: 1;
    transform: translateY(0);
    -webkit-transform: translateY(0);
}

/* Scale effect */
[data-scroll-scale] {
    transform: scale(0.95);
    -webkit-transform: scale(0.95);
    opacity: 0;
    transition: transform 1.2s cubic-bezier(0.23, 1, 0.32, 1), opacity 1s ease;
}

[data-scroll-scale].is-inview {
    transform: scale(1);
    -webkit-transform: scale(1);
    opacity: 1;
}

/* Rotation effect */
[data-scroll-rotate] {
    transform: rotate(-5deg);
    -webkit-transform: rotate(-5deg);
    opacity: 0;
    transition: transform 1.2s cubic-bezier(0.23, 1, 0.32, 1), opacity 1s ease;
}

[data-scroll-rotate].is-inview {
    transform: rotate(0);
    -webkit-transform: rotate(0);
    opacity: 1;
}

/* Blur effect */
[data-scroll-blur] {
    filter: blur(10px);
    -webkit-filter: blur(10px);
    opacity: 0;
    transition: filter 1.2s ease-out, -webkit-filter 1.2s ease-out, opacity 1s ease;
}

[data-scroll-blur].is-inview {
    filter: blur(0);
    -webkit-filter: blur(0);
    opacity: 1;
}

/* Firefox-specific optimizations */
@-moz-document url-prefix() {
    .has-scroll-smooth [data-scroll-container] {
        scroll-behavior: smooth;
        scrollbar-width: none;
        transform-style: preserve-3d;
        backface-visibility: hidden;
        contain: layout paint style;
        will-change: transform;
        transform: translate3d(0, 0, 0) scale(1);
    }
    
    [data-scroll] {
        transform-style: flat;
        contain: layout paint style;
        transition-duration: 0.8s;
    }
    
    [data-scroll-speed="1"] {
        transform: translate3d(0, calc(var(--scroll-offset, 0) * 0.45), 0);
    }
    
    [data-scroll-speed="2"] {
        transform: translate3d(0, calc(var(--scroll-offset, 0) * 0.65), 0);
    }
    
    [data-scroll-speed="3"] {
        transform: translate3d(0, calc(var(--scroll-offset, 0) * 0.85), 0);
    }
    
    [data-scroll-parallax] {
        transform-origin: center center;
        backface-visibility: hidden;
        contain: paint layout style;
        transform: translate3d(0, calc(var(--scroll-offset, 0) * -0.1), 0);
    }

    [data-scroll-fade],
    [data-scroll-scale],
    [data-scroll-rotate] {
        transition-duration: 0.8s;
        transition-timing-function: cubic-bezier(0.23, 1, 0.32, 1);
    }
}

/* Chrome-specific optimizations */
@media screen and (-webkit-min-device-pixel-ratio:0) {
    .has-scroll-smooth [data-scroll-container] {
        -webkit-overflow-scrolling: touch;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        will-change: transform;
    }

    [data-scroll] {
        transform-origin: center center;
        -webkit-transform-origin: center center;
        will-change: transform, opacity;
    }
}

/* Prevent horizontal scrollbar */
.has-scroll-smooth body {
    overflow-x: hidden;
}
