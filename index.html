<!DOCTYPE html>
<html lang="en" class="has-scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Join the Waitlist - Veyron AI Web Development Framework</title>
    
    <!-- Locomotive Scroll - Using only our optimized version -->
    <link rel="stylesheet" href="src/components/locomotive-scroll.css">
    
    <!-- jQuery dependency (required for particle system) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <link rel="stylesheet" href="src/components/glassmorphic-shiny-button.css">
    
    <!-- PIXI.js for particle rendering -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js"></script>
    
    <!-- Clear hash on page load -->
    <script>
        window.onload = function() {
            if (window.location.hash) {
                history.replaceState(null, '', window.location.pathname);
            }
        }
    </script>
</head>
<body>
    <!-- Background Animation -->
    <div class="background-animation"></div>

    <!-- Header -->
    <header class="header">
        <div class="container-lg">
            <!-- Animated Logo -->
            <a href="#" class="animated-logo-button">
                <span class="actual-text">Veyron</span>
                <span class="hover-text" aria-hidden="true">Veyron</span>
            </a>

            <!-- Navigation -->
            <ul class="header-nav">
                <li><a href="#overview" class="header-nav-link">Overview</a></li>
                <li><a href="#architecture" class="header-nav-link">Architecture</a></li>
                <li><a href="#laws" class="header-nav-link">Core Laws</a></li>
                <li><a href="#features" class="header-nav-link">Features</a></li>
            </ul>

            <!-- Actions with enhanced button structure -->
            <div class="header-actions">
                <div class="button-wrapper" data-animation="enabled">
                    <a href="#waitlist" class="glassmorphic-shiny-button" data-animation-role="button">
                        <span class="button-content">Join Waitlist</span>
                        <div class="button-border" data-animation-role="border"></div>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- React app entry point -->
    <script type="module" src="/src/main.tsx"></script>

    <main data-scroll-container>
        <div id="root" data-scroll-section></div>

        <!-- Hero Section with Waitlist -->
        <section id="waitlist" class="section hero-section" data-scroll-section>
            <span class="early-access-badge" data-scroll data-scroll-speed="2" data-scroll-fade>ðŸš€ Coming Soon - Join the Waitlist</span>
            <h1 data-scroll data-scroll-speed="2" data-scroll-rotate>The Future of AI-Powered<br>Web Development</h1>
            <p data-scroll data-scroll-speed="1" data-scroll-fade>
                Be among the first to experience Veyron - the revolutionary AI-driven web development framework. 
                Sign up now for early access and exclusive updates.
            </p>
            <form class="waitlist-form" data-scroll data-scroll-speed="2" data-scroll-scale>
                <input type="email" placeholder="Enter your email address" required>
                <input type="text" placeholder="Your role (e.g., Developer, Business Owner)" required>
                <button type="submit">Join the Waitlist</button>
            </form>
        </section>

        <!-- Technical Overview Section -->
        <section id="overview" class="section" data-scroll-section>
            <h2 data-scroll data-scroll-speed="2" data-scroll-blur>Technical Overview</h2>
            <p data-scroll data-scroll-speed="3" data-scroll-fade>
                Veyron is a sophisticated web development framework powered by a multi-agent AI system, built on Next.js 13+ with TypeScript. 
                It leverages multiple AI models including O1, Claude, Vertex AI, Gemini, and Perplexity to create intelligent, autonomous web development workflows.
            </p>
            
            <div id="workflow-root" data-scroll data-scroll-speed="3" data-scroll-fade></div>
        </section>

        <!-- Core Architecture Section -->
        <section id="architecture" class="section" data-scroll-section>
            <h2 data-scroll data-scroll-speed="2" data-scroll-blur>Core Architecture</h2>
            <div class="features-grid" data-scroll data-scroll-speed="2" data-scroll-fade>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>Frontend Stack</h3>
                    <p>Next.js 13+ with App Router, TypeScript, and Tailwind CSS</p>
                </div>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>AI Agent System</h3>
                    <p>Specialized AI agents for different aspects of development</p>
                </div>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>State Management</h3>
                    <p>Context-based state handling with real-time updates</p>
                </div>
            </div>
        </section>

        <!-- Five Core Laws Section -->
        <section id="laws" class="section" data-scroll-section>
            <h2 data-scroll data-scroll-speed="2" data-scroll-blur>The Five Core Laws</h2>
            <div class="features-grid" data-scroll data-scroll-speed="2" data-scroll-fade>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>Revenue Generation</h3>
                    <p>Automated monetization strategy implementation</p>
                </div>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>Design Excellence</h3>
                    <p>Component-based architecture with modern UI/UX patterns</p>
                </div>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>SEO Optimization</h3>
                    <p>Automated meta-data and schema markup implementation</p>
                </div>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>User Engagement</h3>
                    <p>Interactive elements and content personalization</p>
                </div>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>Analytics Integration</h3>
                    <p>Comprehensive data collection and monitoring</p>
                </div>
            </div>
        </section>

        <!-- Technical Features Section -->
        <section id="features" class="section" data-scroll-section>
            <h2 data-scroll data-scroll-speed="2" data-scroll-blur>Technical Features</h2>
            <div class="features-grid" data-scroll data-scroll-speed="2" data-scroll-fade>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>Adjustable AI Autonomy</h3>
                    <p>Fine-grained control over AI decision-making</p>
                </div>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>Development Interface</h3>
                    <p>Live preview environment with real-time code generation</p>
                </div>
                <div class="feature-card" data-scroll data-scroll-scale>
                    <h3>Component System</h3>
                    <p>Reusable UI components with theme-aware styling</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Locomotive Scroll -->
    <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.min.js"></script>

    <!-- Initialize Locomotive Scroll and Background Animation -->
    <script>
        // Browser detection for both scroll and button animations
        const isFirefox = navigator.userAgent.toLowerCase().includes('firefox');
        const isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        let scroller;
        let scrollRAF;
        let resizeRAF;
        let lastScrollTop = 0;
        
        // Initialize button animations with browser-specific handling
        function initButtonAnimations() {
            const buttons = document.querySelectorAll('[data-animation="enabled"]');
            buttons.forEach(wrapper => {
                const button = wrapper.querySelector('[data-animation-role="button"]');
                if (button) {
                    // Apply browser-specific optimizations
                    if (isChrome) {
                        button.style.willChange = 'transform';
                        button.style.transform = 'translateZ(0)';
                    }
                    // Add event listeners with browser-specific behavior
                    button.addEventListener('mouseenter', (e) => {
                        if (isChrome) {
                            e.target.style.transition = 'all 0.3s cubic-bezier(0.25, 1, 0.5, 1)';
                        }
                    });
                }
            });
        }

        // Get browser-specific scroll options while maintaining original Chrome behavior
        const getScrollOptions = () => {
            // Base options (original Chrome settings)
            const baseOptions = {
                el: document.querySelector('[data-scroll-container]'),
                smooth: true,
                multiplier: 1,
                lerp: 0.1,
                getDirection: true,
                getSpeed: true,
                class: 'is-inview',
                initPosition: { x: 0, y: 0 },
                reloadOnContextChange: true,
                touchMultiplier: 2,
                smoothMobile: true,
                smartphone: {
                    smooth: true,
                    multiplier: 1,
                    lerp: 0.1
                },
                tablet: {
                    smooth: true,
                    multiplier: 1,
                    lerp: 0.1
                }
            };

            // Only modify for Firefox
            if (isFirefox) {
                return {
                    ...baseOptions,
                    multiplier: 0.45,    // Reduced multiplier for Firefox
                    lerp: 0.08,          // Slightly reduced lerp for smoother Firefox scrolling
                    firefoxMultiplier: 35, // Firefox-specific speed adjustment
                    smoothMobile: true,
                    smartphone: {
                        smooth: true,
                        multiplier: 0.45,
                        lerp: 0.08
                    },
                    tablet: {
                        smooth: true,
                        multiplier: 0.45,
                        lerp: 0.08
                    }
                };
            }

            return baseOptions;
        };

        // Normalize scroll speed only for Firefox
        function normalizeScrollSpeed(speed, delta) {
            if (!isFirefox) return speed;

            // Firefox-specific speed normalization
            let normalizedSpeed = speed * 0.45;
            
            // Additional adjustments for scroll direction in Firefox
            if (delta > 0) {
                normalizedSpeed *= 0.8; // Slower downward scroll
            }
            
            return normalizedSpeed;
        }

        // Initialize scroll with error handling
        function initScroll() {
            try {
                if (scroller) {
                    scroller.destroy();
                }
                
                scroller = new LocomotiveScroll(getScrollOptions());
                
                // Enhanced scroll handler
                scroller.on('scroll', (args) => {
                    cancelAnimationFrame(scrollRAF);
                    scrollRAF = requestAnimationFrame(() => {
                        const scrollY = args.scroll.y;
                        const delta = scrollY - lastScrollTop;
                        
                        // Apply scroll transform with browser-specific handling
                        if (isFirefox) {
                            const normalizedY = normalizeScrollSpeed(scrollY, delta);
                            document.documentElement.style.setProperty('--scroll-offset', `${normalizedY}px`);
                        } else {
                            document.documentElement.style.setProperty('--scroll-offset', `${scrollY}px`);
                        }
                        
                        lastScrollTop = scrollY;
                    });
                });

                // Error recovery
                scroller.on('scroll:error', (error) => {
                    console.error('Scroll error:', error);
                    initScroll();
                });

                return true;
            } catch (error) {
                console.error('Scroll initialization error:', error);
                return false;
            }
        }

        // Enhanced scroll to section with browser-specific timing
        function scrollToSection(targetId, event) {
            if (event) {
                event.preventDefault();
            }
            
            const targetSection = document.getElementById(targetId);
            if (!targetSection || !scroller) return;

            try {
                scroller.scrollTo(targetSection, {
                    offset: 0,
                    duration: isFirefox ? 1200 : 1000, // Slightly longer duration for Firefox
                    easing: [0.23, 1, 0.32, 1],
                    disableLerp: false
                });
                
                history.pushState(null, null, `#${targetId}`);
            } catch (error) {
                console.error('Scroll to section error:', error);
                targetSection.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Optimized resize handler
        function handleResize() {
            cancelAnimationFrame(resizeRAF);
            resizeRAF = requestAnimationFrame(() => {
                if (scroller) {
                    scroller.update();
                }
            });
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            if (initScroll()) {
                // Setup navigation
                document.querySelectorAll('.header-nav-link, .glassmorphic-shiny-button').forEach(anchor => {
                    anchor.addEventListener('click', (e) => {
                        const targetId = anchor.getAttribute('href').substring(1);
                        scrollToSection(targetId, e);
                    });
                });

                // Setup resize handler
                window.addEventListener('resize', handleResize, { passive: true });

                // Setup form handler
                document.querySelector('.waitlist-form').addEventListener('submit', function(e) {
                    e.preventDefault();
                    alert('Thanks for joining the waitlist! We\'ll keep you updated on our launch.');
                    this.reset();
                });

                // Initialize button animations
                initButtonAnimations();

                // Create background animation
                createGlowingDots();
            }
        });

        // Background animation with browser-specific optimizations
        function createGlowingDots() {
            const container = document.querySelector('.background-animation');
            if (!container) return;

            const numberOfDots = isFirefox ? 30 : 50; // Reduced number for Firefox
            
            for (let i = 0; i < numberOfDots; i++) {
                const dot = document.createElement('div');
                dot.className = 'glow-dot';
                dot.style.left = `${Math.random() * 100}%`;
                dot.style.top = `${Math.random() * 100}%`;
                dot.style.animationDelay = `${Math.random() * 3}s`;
                container.appendChild(dot);
            }
        }

        // Cleanup
        window.addEventListener('beforeunload', () => {
            if (scroller) {
                scroller.destroy();
            }
            cancelAnimationFrame(scrollRAF);
            cancelAnimationFrame(resizeRAF);
        });
    </script>
</body>
</html>
